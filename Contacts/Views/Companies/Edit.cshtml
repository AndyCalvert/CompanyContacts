@model Contacts.Models.CompanyContactDetailsViewModel

@{
   ViewBag.Title = "Edit a company";
}

<h2>Edit a company</h2>

<div>
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#companyDetails" aria-controls="companyDetails" role="tab" data-toggle="tab">Company Details</a></li>
        <li role="presentation"><a href="#contacts" aria-controls="contacts" role="tab" data-toggle="tab">Contacts</a></li>
    </ul>

    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="companyDetails">

            @using (Html.BeginForm())
            {
            @Html.AntiForgeryToken()

            <div class="form-horizontal">
                <hr />
                @Html.ValidationSummary( true, "", new { @class = "text-danger" } )

                <div class="form-group">
                    @Html.LabelFor( model => model.CompanyName, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.EditorFor( model => model.CompanyName, new { htmlAttributes = new { @class = "form-control" } } )
                        @Html.ValidationMessageFor( model => model.CompanyName, "", new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.CompanyRef, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.EditorFor( model => model.CompanyRef, new { htmlAttributes = new { @class = "form-control" } } )
                        @Html.ValidationMessageFor( model => model.CompanyRef, "", new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.NatureOfBusiness, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.EditorFor( model => model.NatureOfBusiness, new { htmlAttributes = new { @class = "form-control" } } )
                        @Html.ValidationMessageFor( model => model.NatureOfBusiness, "", new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.KeyContact, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.DropDownListFor( model => model.KeyContact, Model.ContactNames, new { @class = "form-control" } )
                        @Html.ValidationMessageFor( model => model.KeyContact, "", new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.OnSite, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.CheckBoxFor( model => model.OnSite )
                    </div>
                </div>

                <div class="form-group">
                    @Html.LabelFor( model => model.EmergencyContact, htmlAttributes: new { @class = "control-label col-md-2" } )
                    <div class="col-md-10">
                        @Html.DropDownListFor( model => model.EmergencyContact, Model.ContactNames, new { @class = "form-control" } )
                        @Html.ValidationMessageFor( model => model.EmergencyContact, "", new { @class = "text-danger" } )
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="Save" class="btn btn-default" />
                    </div>
                </div>
            </div>
            }

            <div>
                @Html.ActionLink( "Back to List", "Index" )
            </div>

            @section Scripts {
                @Scripts.Render( "~/bundles/jqueryval" )
            }
        </div>
        <div role="tabpanel" class="tab-pane" id="contacts">
            @{Html.RenderAction( "_Details", "Contacts", Model.CompanyName ); }
        </div>
    </div>

</div>

